config:
  target: 'http://localhost:8886'
  phases:
    - duration: 60
      arrivalRate: 50
  processor: "./my-functions.js"

scenarios:
  - name: "get user list info based on User Service"
    flow:
      - loop:
        - function: "generateRandomData"
        - post:
            url: "/api/login"
            count: 1
            json:
              userid: "{{ userid }}"
              videowatched: "{{ videowatched }}"
              videosaved: "{{ videosaved }}"
              region: "{{ region }}" 
      # - log: "Sent a request to /api/login with {{ userid }}, {{ videowatched }}, {{ videosaved }}, {{ region }}"


      # ***********************************************************      
scenarios:
  - name: "post a user into the dbase"
    flow:
      - loop:
        - function: "generateRandomData"
        - post:
            url: "/api/login"
            count: 1
            json:
              userid: "{{ userid }}"
              videowatched: "{{ videowatched }}"
              videosaved: "{{ videosaved }}"
              region: "{{ region }}" 
    #  - log: "Sent a request to /api/login with {{ userid }}, {{ videowatched }}, {{ videosaved }}, {{ region }}"



    